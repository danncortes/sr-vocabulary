import{a as F,d as E,i as A,m as T,n as D,o as k,r as L}from"./chunk-R2UQEXEY.js";import{a as N,b as P}from"./chunk-HKE5MF57.js";import{c as I}from"./chunk-QNTD2VAO.js";import{$ as w,Bb as V,Lb as M,Ma as c,Tb as _,Wa as y,_a as b,eb as u,ib as S,ja as p,jb as C,ka as m,kb as v,lb as r,mb as l,pb as h,rb as g,sb as x,ya as f,zb as s}from"./chunk-2KB3ONHQ.js";function R(n,e){if(n&1&&(r(0,"option",12),s(1),l()),n&2){let t=e.$implicit,a=x();u("value",t),c(),V(" ",a.getStageLabel(t)," ")}}function O(n,e){if(n&1){let t=h();r(0,"app-phrase",16),g("selectedChange",function(o){let i=p(t).selectedChange;return m(i(o))}),l()}if(n&2){let t=e.translatedPhrase,a=e.showSelectCheckbox,o=e.isSelected;u("showReviewDate",!1)("translatedPhrase",t)("showSelectCheckbox",a)("showDeleteButton",!0)("isSelected",o)}}var B=class n{vocabularyStore=w(I);audioFilter=f("all");stageFilter=f("all");textSearch=f("");learnedStageId=6;availableStages=_(()=>{let e=new Set;for(let t of this.vocabularyStore.sourceVocabulary())e.add(t.sr_stage_id);return Array.from(e).sort((t,a)=>t-a)});filteredVocabulary=_(()=>{let e=this.vocabularyStore.sourceVocabulary(),t=this.audioFilter();t==="with-audio"?e=e.filter(i=>i.original.audio_url||i.translated.audio_url):t==="without-audio"&&(e=e.filter(i=>!i.original.audio_url&&!i.translated.audio_url));let a=this.stageFilter();a!=="all"&&(e=e.filter(i=>i.sr_stage_id===parseInt(a,10)));let o=this.textSearch().toLowerCase().trim();return o&&(e=e.filter(i=>i.original.text.toLowerCase().includes(o)||i.translated.text.toLowerCase().includes(o))),e});getStageLabel(e){return e===this.learnedStageId?"Learned":String(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-vocabulary-view"]],hostAttrs:[2,"height","calc(100vh - 32px - 3rem)"],decls:26,vars:4,consts:[["phrase",""],[1,"flex","flex-col","gap-4","h-full"],[1,"flex","flex-row","flex-wrap","gap-4","items-center","p-3","bg-gray-50","rounded-lg","border","border-gray-200","vocabulary-filters","sticky"],[1,"flex","flex-row","flex-wrap","gap-4","items-center","shrink-0","max-w-full"],[1,"flex","items-center","gap-2","flex-1","vocabulary-filters__audio-filter"],[1,"text-sm","text-gray-600"],["name","audioFilter",1,"select","select-sm","select-bordered","flex-grow",3,"ngModelChange","ngModel"],["value","all"],["value","with-audio"],["value","without-audio"],[1,"flex","items-center","gap-2","flex-1","vocabulary-filters__stage-filter"],["name","stageFilter",1,"select","select-sm","select-bordered","flex-grow",3,"ngModelChange","ngModel"],[3,"value"],[1,"flex","items-center","gap-2","flex-1","vocabulary-filters__text-search"],["type","text","placeholder","Search text...",1,"input","input-sm","input-bordered","w-full",3,"ngModelChange","ngModel"],["color","gray","title","All Vocabulary",1,"flex-1","min-h-0",3,"vocabulary"],[3,"selectedChange","showReviewDate","translatedPhrase","showSelectCheckbox","showDeleteButton","isSelected"]],template:function(t,a){if(t&1){let o=h();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),s(5,"Audio:"),l(),r(6,"select",6),g("ngModelChange",function(d){return p(o),m(a.audioFilter.set(d))}),r(7,"option",7),s(8,"All"),l(),r(9,"option",8),s(10,"With audio"),l(),r(11,"option",9),s(12,"Without audio"),l()()(),r(13,"div",10)(14,"span",5),s(15,"Stage:"),l(),r(16,"select",11),g("ngModelChange",function(d){return p(o),m(a.stageFilter.set(d))}),r(17,"option",7),s(18,"All"),l(),C(19,R,2,2,"option",12,S),l()()(),r(21,"div",13)(22,"input",14),g("ngModelChange",function(d){return p(o),m(a.textSearch.set(d))}),l()()(),r(23,"app-vocabulary-list",15),b(24,O,1,5,"ng-template",null,0,M),l()()}t&2&&(c(6),u("ngModel",a.audioFilter()),c(10),u("ngModel",a.stageFilter()),c(3),v(a.availableStages()),c(3),u("ngModel",a.textSearch()),c(),u("vocabulary",a.filteredVocabulary()))},dependencies:[P,N,L,D,k,F,T,E,A],encapsulation:2})};export{B as VocabularyViewComponent};
