import{A as l,Bb as i,Ea as h,I as o,bb as v,k as a,oa as d,rb as C,t as f,ub as A,vb as g,wb as R,xb as k,yb as s,zb as H}from"./chunk-QOAVKJMH.js";var S=()=>{let t=o(i),e=o(s);return t.isAuthenticated()?!0:e.parseUrl("/login")};var b=()=>{let t=o(i),e=o(s);return t.isAuthenticated()?e.parseUrl("/dashboard"):!0};var F=[{path:"login",loadComponent:()=>import("./chunk-DDCNYJ3Z.js").then(t=>t.LoginComponent),canActivate:[b]},{path:"dashboard",loadComponent:()=>import("./chunk-4LAVELU7.js").then(t=>t.DashboardComponent),canActivate:[S]},{path:"**",redirectTo:"dashboard"}];var T=["expired","Invalid or missing token"],c=!1,w=(t,e)=>t.clone({headers:t.headers.set("Authorization",`Bearer ${e}`)}),E=(t,e)=>{let r=o(i),u=r.getToken();return t.url.includes("/user/refresh")?e(t):u?e(w(t,u)).pipe(f(p=>{if(p.status===401){let y=p.error?.error||"";if(T.some(n=>y.includes(n))&&!c)return c=!0,r.refreshToken().pipe(l(n=>(c=!1,n?.access_token?e(w(t,n.access_token)):a(()=>p))),f(n=>(c=!1,r.logout(),a(()=>n))))}return a(()=>p)})):e(t)};var I={providers:[v({eventCoalescing:!0}),H(F),A(R(),g([E]))]};var m=class t{title="sr-vocabulary";static \u0275fac=function(r){return new(r||t)};static \u0275cmp=d({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(r,u){r&1&&h(0,"router-outlet")},dependencies:[k],encapsulation:2})};C(m,I).catch(t=>console.error(t));
