import{$ as d,Ma as G,S as h,Sb as L,Tb as C,V as y,Wa as Z,_a as W,a as i,b as V,c as E,d as B,g as I,gb as K,hb as z,kc as w,la as m,lb as q,lc as S,mb as J,n as H,nb as g,pa as F,pc as T,va as $,xa as N,y as R,ya as U}from"./chunk-2KB3ONHQ.js";function Q(t){let e=L(()=>t());return se(e)?new Proxy(t,{get(n,s){return s in e?(N(n[s])||Object.defineProperty(n,s,{value:C(()=>n()[s]),configurable:!0}),Q(n[s])):n[s]}}):t}var oe=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function se(t){if(t===null||typeof t!="object"||ie(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(oe.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function ie(t){return typeof t?.[Symbol.iterator]=="function"}var ce=new WeakMap,b=Symbol("STATE_SOURCE");function f(t,...e){t[b].update(n=>e.reduce((s,o)=>i(i({},s),typeof o=="function"?o(s):o),n)),pe(t)}function le(t){return t[b]()}function ue(t){return ce.get(t[b])||[]}function pe(t){let e=ue(t);for(let n of e){let s=L(()=>le(t));n(s)}}function X(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),s=e;return(()=>{class r{constructor(){let l=s.reduce((k,ae)=>ae(k),de()),{stateSignals:c,props:u,methods:p,hooks:v}=l,D=i(i(i({},c),u),p);this[b]=l[b];for(let k of Reflect.ownKeys(D))this[k]=D[k];let{onInit:A,onDestroy:O}=v;A&&A(),O&&d(F).onDestroy(O)}static \u0275fac=function(c){return new(c||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:n.providedIn||null})}return r})()}function de(){return{[b]:U({}),stateSignals:{},props:{},methods:{},hooks:{}}}function me(t){return e=>{let n=t(i(i(i({[b]:e[b]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),V(i({},e),{props:i(i({},e.props),n)})}}function Y(t){return me(t)}function ee(t){return e=>{let n=t(i(i(i({[b]:e[b]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),V(i({},e),{methods:i(i({},e.methods),n)})}}function te(t){return e=>{let n=typeof t=="function"?t():t,s=Reflect.ownKeys(n);e[b].update(r=>i(i({},r),n));let o=s.reduce((r,a)=>{let l=C(()=>e[b]()[a]);return V(i({},r),{[a]:Q(l)})},{});return V(i({},e),{stateSignals:i(i({},e.stateSignals),o)})}}var x=class t{http=d(S);apiBaseUrl=`${T.apiBaseUrl}/vocabulary`;baseUrl=`${T.apiBaseUrl}`;getAllVocabulary(){return this.http.get(`${this.apiBaseUrl}`)}reviewVocabulary(e){return this.http.post(`${this.apiBaseUrl}/review`,{id:e})}delayVocabulary(e,n){return this.http.post(`${this.apiBaseUrl}/delay`,{ids:e,days:n})}resetVocabulary(e){return this.http.post(`${this.apiBaseUrl}/reset`,{ids:e})}restartVocabulary(e){return this.http.post(`${this.apiBaseUrl}/restart`,{ids:e})}deleteVocabulary(e){return this.http.post(`${this.apiBaseUrl}/delete`,{ids:e})}markAsLearned(e){return this.http.patch(`${this.apiBaseUrl}/${e}/learned`,{learned:!0})}saveVocabulary(e){return this.http.post(`${this.apiBaseUrl}/create`,{vocabulary:e})}updateVocabulary(e){return this.http.post(`${this.apiBaseUrl}/update`,{vocabulary:e})}translatePhrase(e,n,s){return this.http.post(`${this.baseUrl}/translate`,{phrase:e,sourceLanguage:n,targetLanguage:s})}generatePhrase(e,n){return this.http.post(`${this.apiBaseUrl}/generate`,{text:e,locale:n})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var _=class t{http=d(S);baseUrl=`${T.apiBaseUrl}`;getLanguageTranslations(){return this.http.get(`${this.baseUrl}/languages/translations`)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var P=class t{http=d(S);baseUrl=`${T.apiBaseUrl}`;currentUser=null;getCurrentUser(){return this.currentUser}updateUserProfile(e){return new I(n=>{setTimeout(()=>{this.currentUser=i(i({},this.currentUser),e),n.next(this.currentUser),n.complete()},1e3)})}getUserSettings(){return this.http.get(`${this.baseUrl}/user/settings`)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var M=class t{constructor(){}notifications=U({});toast(e){let{permanent:n}=e,s=i({type:"info",duration:5e3,permanent:!1},e),o=Date.now();this.notifications.update(r=>V(i({},r),{[o]:s})),n||setTimeout(()=>{this.dismiss(o)},s.duration)}dismiss(e){this.notifications.update(n=>{let r=n,{[e]:s}=r;return B(r,[E(e)])})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};var fe={sourceVocabulary:[],loading:!1,error:null,languageTranslations:[],userSettings:null,isVocabularyFormOpen:!1,vocabularyToEdit:null},ut=X({providedIn:"root"},te(fe),Y(({sourceVocabulary:t})=>({vocabulary:C(()=>{let e=[],n=[],s=[],o=[],r=[],a=[],l=new Date;for(let c of t()){let u=new Date(c.review_date);c.sr_stage_id===0?(c.original.audio_url||c.translated.audio_url)&&e.push(c):u<=l&&c.learned!==1?n.push(c):u>l&&c.learned===0?s.push(c):c.learned===1&&a.push(c);let p=new Date(c.modified_at).toISOString().split("T")[0]===new Date().toISOString().split("T")[0];c.sr_stage_id===1&&p?o.push(c):c.sr_stage_id>1&&p&&r.push(c)}return e.sort((c,u)=>c.priority-u.priority),s.sort((c,u)=>{let p=new Date(c.review_date),v=new Date(u.review_date);return p.getTime()-v.getTime()}),{new:e,review:n,rest:s,startedToday:o,reviewedToday:r,learned:a}})})),ee((t,e=d(x),n=d(_),s=d(P),o=d(M))=>({initializeAppData(){R({languageTranslations:n.getLanguageTranslations(),userSettings:s.getUserSettings()}).pipe(h({next:r=>{f(t,{languageTranslations:r.languageTranslations,userSettings:r.userSettings,error:null})},error:r=>{o.toast({message:`Error loading app data: ${r instanceof w?r.message:String(r)}`,type:"error"})}})).subscribe(),this.getAllVocabulary()},getAllVocabulary(){f(t,{loading:!0}),e.getAllVocabulary().pipe(h({next:r=>{f(t,{sourceVocabulary:r,loading:!1,error:null})},error:r=>{f(t,{loading:!1,error:r.message})}})).subscribe()},setReviewedVocabulary(r){return e.reviewVocabulary(r).pipe(h({next:a=>{let{sr_stage_id:l,review_date:c,modified_at:u,learned:p}=a;f(t,{sourceVocabulary:t.sourceVocabulary().map(v=>v.id===r?V(i({},v),{sr_stage_id:l,review_date:c,modified_at:u,learned:p}):v)}),o.toast({message:`Vocabulary ${r} marked as reviewed`,type:"success"})},error:a=>{o.toast({message:`Error reviewing vocabulary ${r}: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))},delayVocabulary(r,a){return e.delayVocabulary(r,a).pipe(h({next:l=>{f(t,{sourceVocabulary:t.sourceVocabulary().map(c=>{let p=l.find(v=>v.id===c.id);return p?V(i({},c),{review_date:p.review_date,modified_at:p.modified_at}):c})})},error:l=>{o.toast({message:`Error delaying vocabulary ${r.join(", ")} by ${a} day(s): ${l instanceof w?l.message:String(l)}`,type:"error"})}}))},resetVocabulary(r){return e.resetVocabulary(r).pipe(h({next:a=>{f(t,{sourceVocabulary:t.sourceVocabulary().map(l=>{let u=a.find(p=>p.id===l.id);return u?i(i({},l),u):l})})},error:a=>{o.toast({message:`Error resetting vocabulary ${r.join(", ")}: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))},restartVocabulary(r){return e.restartVocabulary(r).pipe(h({next:a=>{f(t,{sourceVocabulary:t.sourceVocabulary().map(l=>{let u=a.find(p=>p.id===l.id);return u?i(i({},l),u):l})})},error:a=>{o.toast({message:`Error restarting vocabulary ${r.join(", ")}: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))},deleteVocabulary(r){return e.deleteVocabulary(r).pipe(h({next:()=>{f(t,{sourceVocabulary:t.sourceVocabulary().filter(a=>!r.includes(a.id))}),o.toast({message:`Deleted ${r.length} vocab item(s)`,type:"success"})},error:a=>{o.toast({message:`Error deleting vocabulary ${r.join(", ")}: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))},openVocabularyForm(){f(t,{isVocabularyFormOpen:!0})},closeVocabularyForm(){f(t,{isVocabularyFormOpen:!1,vocabularyToEdit:null})},editVocabulary(r){f(t,{vocabularyToEdit:t.sourceVocabulary().find(a=>a.id===r),isVocabularyFormOpen:!0})},createVocabulary(r){return e.saveVocabulary(r).pipe(h({next:a=>{let l=a;f(t,{sourceVocabulary:[...t.sourceVocabulary(),l]}),o.toast({message:"Vocabulary created successfully",type:"success"})},error:a=>{o.toast({message:`Error creating vocabulary: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))},updateVocabulary(r){return e.updateVocabulary(r).pipe(h({next:a=>{let l=a;f(t,{sourceVocabulary:t.sourceVocabulary().map(c=>c.id===l.id?l:c)}),o.toast({message:"Vocabulary updated successfully",type:"success"})},error:a=>{o.toast({message:`Error updating vocabulary: ${a instanceof w?a.message:String(a)}`,type:"error"})}}))}})));function ge(t,e){t&1&&(m(),g(0,"path",1))}function he(t,e){t&1&&(m(),g(0,"path",2))}function ye(t,e){t&1&&(m(),g(0,"path",3))}function be(t,e){t&1&&(m(),g(0,"path",4))}function ve(t,e){t&1&&(m(),g(0,"path",5))}function Ve(t,e){t&1&&(m(),g(0,"path",6))}function we(t,e){t&1&&(m(),g(0,"path",7))}function Te(t,e){t&1&&(m(),g(0,"path",8))}function Se(t,e){t&1&&(m(),g(0,"path",9))}function je(t,e){t&1&&(m(),g(0,"path",10))}function Ce(t,e){t&1&&(m(),g(0,"path",11))}function ke(t,e){t&1&&(m(),g(0,"path",12))}function Ie(t,e){t&1&&(m(),g(0,"path",13))}var ne=class t{type=$.required();customClass=$("");static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Z({type:t,selectors:[["app-icon"]],inputs:{type:[1,"type"],customClass:[1,"customClass"]},decls:14,vars:3,consts:[["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","d","M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"],["stroke-linecap","round","stroke-linejoin","round","d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"],["stroke-linecap","round","stroke-linejoin","round","d","M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"],["stroke-linecap","round","stroke-linejoin","round","d","M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"],["stroke-linecap","round","stroke-linejoin","round","d","m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"],["strokeLinecap","round","strokeLinejoin","round","d","M12 4.5v15m7.5-7.5h-15"],["strokeLinecap","round","strokeLinejoin","round","d","m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"],["strokeLinecap","round","strokeLinejoin","round","d","m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"],["stroke-linecap","round","stroke-linejoin","round","d","M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"],["strokeLinecap","round","strokeLinejoin","round","d","M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"],["strokeLinecap","round","strokeLinejoin","round","d","M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"]],template:function(n,s){if(n&1&&(m(),q(0,"svg",0),W(1,ge,1,0,":svg:path",1)(2,he,1,0,":svg:path",2)(3,ye,1,0,":svg:path",3)(4,be,1,0,":svg:path",4)(5,ve,1,0,":svg:path",5)(6,Ve,1,0,":svg:path",6)(7,we,1,0,":svg:path",7)(8,Te,1,0,":svg:path",8)(9,Se,1,0,":svg:path",9)(10,je,1,0,":svg:path",10)(11,Ce,1,0,":svg:path",11)(12,ke,1,0,":svg:path",12)(13,Ie,1,0,":svg:path",13),J()),n&2){let o;K("size-6 "+s.customClass()),G(),z((o=s.type())==="play"?1:o==="check-circle"?2:o==="ellipsis-horizontal"?3:o==="trash"?4:o==="speaker-wave"?5:o==="speaker-x-mark"?6:o==="pencil"?7:o==="plus"?8:o==="home"?9:o==="language"?10:o==="sparkles"?11:o==="arrow-right-start-on-rectangle"?12:o==="chat-bubble-bottom-center-text"?13:-1)}},encapsulation:2})};var re=class t{http=d(S);baseUrl=`${T.apiBaseUrl}/audio`;audioCache=new Map;CACHE_DURATION_MS=55e3;audioPlayer=null;generateAudio(e){return this.http.post(`${this.baseUrl}/generate`,{text:e})}getAudioUrl(e){let n=this.audioCache.get(e),s=Date.now();return n&&s-n.timestamp<this.CACHE_DURATION_MS?H(n.url):this.http.get(`${this.baseUrl}/${e}`,{responseType:"text"}).pipe(h(o=>{this.audioCache.set(e,{url:o,timestamp:s})}))}playAudio(e){return new I(n=>{this.getAudioUrl(e).subscribe({next:s=>{this.audioPlayer&&(this.audioPlayer.pause(),this.audioPlayer=null),this.audioPlayer=new Audio(s),this.audioPlayer.play().then(()=>{n.next(),n.complete()}).catch(o=>{console.error("Error playing audio:",o),n.error(o)})},error:s=>{console.error("Error fetching audio:",s),n.error(s)}})})}stopAudio(){this.audioPlayer&&(this.audioPlayer.pause(),this.audioPlayer=null)}deleteAudios(e){return this.http.post(`${this.baseUrl}/delete`,{filenames:e})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"})};export{x as a,M as b,ut as c,re as d,ne as e};
