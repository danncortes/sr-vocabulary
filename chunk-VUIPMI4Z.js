import{a as F,d as E,i as A,m as T,n as D,o as L,r as k}from"./chunk-R2UQEXEY.js";import{a as N,b as P}from"./chunk-64XK6Q34.js";import{c as I}from"./chunk-QNTD2VAO.js";import{$ as y,Ab as x,Lb as M,Ma as c,Tb as _,Wa as b,_a as w,eb as u,ib as S,ja as p,jb as C,ka as m,kb as v,lb as r,mb as l,pb as f,rb as g,sb as V,ya as h,zb as s}from"./chunk-2KB3ONHQ.js";function R(n,e){if(n&1&&(r(0,"option",10),s(1),l()),n&2){let t=e.$implicit,a=V();u("value",t),c(),x(a.getStageLabel(t))}}function O(n,e){if(n&1){let t=f();r(0,"app-phrase",14),g("selectedChange",function(o){let i=p(t).selectedChange;return m(i(o))}),l()}if(n&2){let t=e.translatedPhrase,a=e.showSelectCheckbox,o=e.isSelected;u("showReviewDate",!1)("translatedPhrase",t)("showSelectCheckbox",a)("showDeleteButton",!0)("isSelected",o)}}var B=class n{vocabularyStore=y(I);audioFilter=h("all");stageFilter=h("all");textSearch=h("");learnedStageId=6;availableStages=_(()=>{let e=new Set;for(let t of this.vocabularyStore.sourceVocabulary())e.add(t.sr_stage_id);return Array.from(e).sort((t,a)=>t-a)});filteredVocabulary=_(()=>{let e=this.vocabularyStore.sourceVocabulary(),t=this.audioFilter();t==="with-audio"?e=e.filter(i=>i.original.audio_url||i.translated.audio_url):t==="without-audio"&&(e=e.filter(i=>!i.original.audio_url&&!i.translated.audio_url));let a=this.stageFilter();a!=="all"&&(e=e.filter(i=>i.sr_stage_id===parseInt(a,10)));let o=this.textSearch().toLowerCase().trim();return o&&(e=e.filter(i=>i.original.text.toLowerCase().includes(o)||i.translated.text.toLowerCase().includes(o))),e});getStageLabel(e){return e===this.learnedStageId?"Learned":String(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=b({type:n,selectors:[["app-vocabulary-view"]],hostAttrs:[2,"height","calc(100vh - 32px - 3rem)"],decls:25,vars:4,consts:[["phrase",""],[1,"flex","flex-col","gap-4","h-full"],[1,"flex","flex-wrap","gap-4","items-center","p-3","bg-gray-50","rounded-lg","border","border-gray-200","vocabulary-filters","sticky"],[1,"flex","items-center","gap-2","vocabulary-filters__audio-filter"],[1,"text-sm","text-gray-600"],[1,"select","select-sm","select-bordered",3,"ngModelChange","ngModel"],["value","all"],["value","with-audio"],["value","without-audio"],[1,"flex","items-center","gap-2","vocabulary-filters__stage-filter"],[3,"value"],[1,"flex","items-center","gap-2","flex-1","min-w-48","vocabulary-filters__text-search"],["type","text","placeholder","Search text...",1,"input","input-sm","input-bordered","w-full","max-w-xs",3,"ngModelChange","ngModel"],["color","gray","title","All Vocabulary",1,"flex-1","min-h-0",3,"vocabulary"],[3,"selectedChange","showReviewDate","translatedPhrase","showSelectCheckbox","showDeleteButton","isSelected"]],template:function(t,a){if(t&1){let o=f();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),s(4,"Audio:"),l(),r(5,"select",5),g("ngModelChange",function(d){return p(o),m(a.audioFilter.set(d))}),r(6,"option",6),s(7,"All"),l(),r(8,"option",7),s(9,"With audio"),l(),r(10,"option",8),s(11,"Without audio"),l()()(),r(12,"div",9)(13,"span",4),s(14,"Stage:"),l(),r(15,"select",5),g("ngModelChange",function(d){return p(o),m(a.stageFilter.set(d))}),r(16,"option",6),s(17,"All"),l(),C(18,R,2,2,"option",10,S),l()(),r(20,"div",11)(21,"input",12),g("ngModelChange",function(d){return p(o),m(a.textSearch.set(d))}),l()()(),r(22,"app-vocabulary-list",13),w(23,O,1,5,"ng-template",null,0,M),l()()}t&2&&(c(5),u("ngModel",a.audioFilter()),c(10),u("ngModel",a.stageFilter()),c(3),v(a.availableStages()),c(3),u("ngModel",a.textSearch()),c(),u("vocabulary",a.filteredVocabulary()))},dependencies:[P,N,k,D,L,F,T,E,A],encapsulation:2})};export{B as VocabularyViewComponent};
